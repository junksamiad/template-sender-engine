# OpenAI Platform Configuration - Low-Level Design (LLD) - Dev Environment

## 1. Introduction

This document details the configuration and structure for integrating with the OpenAI Assistants API within the AI Multi-Communications Engine's development (`src_dev`) environment.

## 2. Organizational Structure in OpenAI

To manage API keys and Assistants effectively, the following structure will be adopted within the Adaptix Innovation OpenAI account:

*   **Conceptual Projects per Channel:** Assistants and API usage will be logically grouped by the communication channel they serve. Separate OpenAI API Keys will be generated and used for each channel.
    *   `ai-multi-comms-whatsapp`: Handles all WhatsApp-related AI processing.
    *   `ai-multi-comms-sms`: Handles all SMS-related AI processing.
    *   `ai-multi-comms-email`: Handles all Email-related AI processing.

*   **Assistant Location:** All OpenAI Assistants created for the AI Multi-Comms Engine (across all client companies and projects) will reside within one of these channel-specific conceptual projects. For example, an Assistant designed to handle WhatsApp replies for "Client A / Project X" and another Assistant for WhatsApp template sending for "Client B / Project Y" will both logically belong under the `ai-multi-comms-whatsapp` scope and use its associated API key.

## 3. API Key Management

*   **Channel-Specific Keys:** Separate OpenAI API keys must be generated for each channel project (`whatsapp`, `sms`, `email`).
*   **Storage:** These keys will be stored securely in AWS Secrets Manager.
*   **Referencing:** The `company-data-dev` DynamoDB table will store references (secret names/paths) to these channel-specific keys.
    *   The reference path (e.g., `openai-api-key/whatsapp`) is stored under the key `api_key_reference` within the channel-specific map located at `ai_config.openai_config.<channel>`.
    *   (See `company-data-db-dev.md` for the full schema).

## 4. Assistant Naming Convention (OpenAI Dashboard)

For ease of identification within the OpenAI platform's Assistants dashboard, the following naming convention is recommended for Assistants:

```
#CompanyName#ProjectName#AssistantPurpose
```

*   `#CompanyName`: The name of the client company (e.g., `#CucumberRecruitment`).
*   `#ProjectName`: The name of the client project (e.g., `#CVAnalysis`).
*   `#AssistantPurpose`: A brief identifier for the Assistant's role (e.g., `#TemplateSender`, `#ReplyHandler`, `#Clarification`).

**Example:** `#CucumberRecruitment#CVAnalysis#TemplateSender`

**Note:** This naming is purely for human reference in the OpenAI UI. The application code interacts with Assistants using their unique Assistant IDs (`asst_...`).

## 5. Assistant ID Management

*   **Storage:** The unique Assistant IDs (`asst_...`) generated by OpenAI upon creation are stored in the `company-data-dev` DynamoDB table.
*   **Location:** They reside within the `ai_config` map under specific keys indicating their purpose (e.g., `assistant_id_template_sender`, `assistant_id_replies`, `assistant_id_3`, etc.).
*   **Usage:** The Channel Processor Lambdas retrieve the required Assistant ID(s) from the `Context Object` (which contains the `ai_config` data) at runtime to interact with the correct OpenAI Assistant.

## 6. Assistant Creation

*   Assistants will be created programmatically using a script leveraging the OpenAI API and the appropriate channel-specific API key.
*   The script will prompt for necessary details (name, instructions, model, function definitions if any).
*   The generated Assistant ID must be manually recorded and updated in the relevant `company-data-dev` DynamoDB record. 